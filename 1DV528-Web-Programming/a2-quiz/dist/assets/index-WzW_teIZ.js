(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const m of o.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&r(m)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();const I=document.getElementById("progress-indicator");let f,a=0;const b=document.getElementById("my-score-div"),q=document.getElementById("result-text");function B(){a=0}function D(){return a}function L(){clearInterval(f)}function E(e){const t=e*1e3;function n(s){const o=s/t*100;I.style.width=`${100-o}%`}let r=0;f=setInterval(function(){a+=10,b.innerHTML=a,r+=10,n(r),r>t&&(clearInterval(f),q.textContent="Time out!",y(!1),I.style.width="100%")},10)}const p=window.localStorage;let l=JSON.parse(p.getItem("topScores"));const O=document.querySelectorAll(".scoreboard-item");function k(e,t){if(l==null)l=[{username:e,time:t}];else for(let n=0;n<5;n++)if(l[n]==null){l[n]={username:e,time:t};break}else if(l[n].time>t){const r=l[n];l[n]={username:e,time:t},e=r.username,t=r.time}p.setItem("topScores",JSON.stringify(l))}function h(){l=JSON.parse(p.getItem("topScores"));for(let e=0;e<5;e++)l[e]!=null&&(O[e].textContent=`${l[e].username} - ${l[e].time}`)}let c="https://courselab.lnu.se/quiz/question/1",v,g=!1;const i={welcomeDiv:document.getElementById("welcome-div"),quizDiv:document.getElementById("quiz-div"),questionDiv:document.getElementById("question-div"),inputQuestionDiv:document.getElementById("input-question-div"),listQuestionDiv:document.getElementById("list-question-div"),resultDiv:document.getElementById("result-div"),progressDiv:document.getElementById("progress-div")},u={usernameInput:document.getElementById("username-input"),answerInput:document.getElementById("answer-input")},x=document.querySelectorAll(".answer-button"),d={resultText:document.getElementById("result-text"),resultStatus:document.getElementById("result-status")},z=document.getElementById("progress-indicator");function Q(){document.addEventListener("keydown",function(e){g&&e.key==="Enter"&&C()}),u.usernameInput.addEventListener("keydown",function(e){e.key==="Enter"&&T()}),u.answerInput.addEventListener("keydown",function(e){e.key==="Enter"&&(w(u.answerInput.value),u.answerInput.value="")}),x.forEach(function(e){const t=e.value;e.addEventListener("click",function(){w(t)})})}async function T(){v=u.usernameInput.value,i.welcomeDiv.style.display="none",await S(),i.quizDiv.style.display="block"}async function S(){const t=await(await fetch(c)).json();if(i.questionDiv.innerText=t.question,c=t.nextURL,t.alternatives==null)i.listQuestionDiv.style.display="none",i.inputQuestionDiv.style.display="block";else{i.listQuestionDiv.style.display="block",i.inputQuestionDiv.style.display="none";for(let n=0;n<4;n++)x[n].textContent=t.alternatives["alt"+(n+1)]}i.quizDiv.style.display="block",i.progressDiv.style.display="block",z.style.width="100%",t.limit!=null?E(t.limit):E(10)}async function w(e){L();const t=await fetch(c,{method:"POST",body:JSON.stringify({answer:e}),headers:{"Content-Type":"application/json"}}),n=await t.json();t.status===400?(d.resultText.textContent=n.message,y(!1)):n.nextURL!=null?(c=n.nextURL,S()):(d.resultText.textContent=`${v} - ${D()}ms`,y(!0))}function C(){c="https://courselab.lnu.se/quiz/question/1",g=!1,B(),i.welcomeDiv.style.display="block",i.resultDiv.style.display="none"}function y(e){if(i.quizDiv.style.display="none",i.progressDiv.style.display="none",g=!0,e){d.resultStatus.textContent="You win! Press Enter to continue",i.resultDiv.style.display="block";const t=D();k(v,t)}else d.resultStatus.textContent="You lose! Press Enter to continue",i.resultDiv.style.display="block";h()}Q();h();
