(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))t(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&t(o)}).observe(document,{childList:!0,subtree:!0});function d(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function t(a){if(a.ep)return;a.ep=!0;const s=d(a);fetch(a.href,s)}})();let E;const D=document.querySelector("body");function x(n){const e=document.createElement("div");e.setAttribute("draggable",!0),e.classList.add("window");const d=document.createElement("header");d.classList.add("window-header");const t=document.createElement("div");t.classList.add("window-header-info");const a=document.createElement("div");switch(a.classList.add("window-thumbnail"),n){case"Memory Game":a.classList.add("window-header-info-game");break;case"Chat App":a.classList.add("window-header-info-chat");break;case"Quiz App":a.classList.add("window-header-info-quiz");break}const s=document.createElement("p");s.innerText=n,s.classList.add="window-name",t.appendChild(a),t.appendChild(s);const o=document.createElement("i");o.classList.add("fa-solid"),o.classList.add("fa-xmark"),o.classList.add("window-close-btn"),o.addEventListener("click",()=>{D.removeChild(e)}),d.appendChild(t),d.appendChild(o),e.appendChild(d);const r=document.createElement("main");return r.classList.add("window-main"),e.appendChild(r),G(e),q(e),e.addEventListener("click",()=>{q(e)}),e}function G(n){let e=!1;n.addEventListener("mousedown",d=>{e=!0;const t=d.clientX-n.getBoundingClientRect().left,a=d.clientY-n.getBoundingClientRect().top;function s(r){e&&(n.style.left=r.clientX-t+"px",n.style.top=r.clientY-a+"px",q(n))}function o(){e=!1,document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",o)}document.addEventListener("mousemove",s),document.addEventListener("mouseup",o)})}function q(n){E!==void 0&&(E.style.zIndex=1),E=n,E.style.zIndex=2}function k(){return E}const w=["rgb(0, 0, 0)","rgb(255, 0, 0)","rgb(0, 255, 0)","rgb(0, 0, 255)","rgb(0, 255, 255)","rgb(255, 0, 255)","rgb(255, 255, 0)","rgb(255, 255, 255)","rgb(100, 0, 0)","rgb(0, 100, 0)","rgb(0, 0, 177)","rgb(0, 177, 177)","rgb(177, 0, 177)","rgb(177, 177, 0)","rgb(177, 177, 177)"];function O(n){const e=n.querySelector(".window-main"),d=document.createElement("div");d.classList.add("memory-game-setup");const t=document.createElement("input");t.classList.add("game-input"),t.setAttribute("value","2"),t.setAttribute("min","2"),t.setAttribute("max","5"),t.setAttribute("type","number"),d.appendChild(t);const a=document.createElement("p");a.innerText="X",d.appendChild(a);const s=document.createElement("input");s.classList.add("game-input"),s.setAttribute("value","2"),s.setAttribute("min","2"),s.setAttribute("max","5"),s.setAttribute("type","number"),d.appendChild(s);const o=document.createElement("button");o.classList.add("game-button"),o.innerText="Start",o.addEventListener("click",()=>{if(s.value>5||t.value>5){const r=document.createElement("p");r.classList.add("game-warning"),r.textContent="Maximum of 5 rows or columns allowed!",e.querySelector(".game-warning")||e.appendChild(r);return}if(s.value*t.value%2===1){const r=document.createElement("p");r.classList.add("game-warning"),r.textContent="Either rows or columns has to be even!",e.querySelector(".game-warning")&&e.removeChild(e.querySelector(".game-warning")),e.appendChild(r);return}e.innerHTML="",z(e,[t.value,s.value])}),d.appendChild(o),e.appendChild(d)}function z(n,e){const d=parseInt(e[0]),t=parseInt(e[1]),a=document.createElement("div");a.classList.add("memory-game"),a.style.gridTemplateColumns=`repeat(${t}, 1fr)`;for(let m=0;m<d*t;m++){const b=P();b.setAttribute("value",m),b.addEventListener("click",C),a.appendChild(b)}const s=document.createElement("div");s.classList.add("memory-game-footer");const o=document.createElement("p");o.classList.add("memory-game-timer"),o.textContent="0:00";const r=document.createElement("p");r.classList.add("memory-game-attempts"),r.textContent="Attempts: 0";const l=document.createElement("button");l.classList.add("game-button"),l.textContent="Restart",l.addEventListener("click",T),s.appendChild(o),s.appendChild(r),s.appendChild(l),n.appendChild(a),n.appendChild(s),document.addEventListener("keydown",B);const h=[];for(let m=0;m<d*t/2;m++)h.push(m),h.push(m);I(w),I(h);let u,p,L=0,f=0,c=0,i=n.querySelector(".card"),g=0;A();const v=setInterval(()=>{f++;const m=Math.floor(f/60),b=f%60,R=`${m<10?"0":""}${m}:${b<10?"0":""}${b}`;o.textContent=R},1e3);function C(m){this!==void 0&&(m=this),!m.classList.contains("card-done")&&u!==m&&(u===void 0?(r.textContent="Attempts: "+ ++L,u=m,u.style.backgroundColor=w[h[u.getAttribute("value")]],u.classList.remove("card-hidden")):p===void 0&&(p=m,p.style.backgroundColor=w[h[p.getAttribute("value")]],p.classList.remove("card-hidden"),w[h[u.getAttribute("value")]]===w[h[p.getAttribute("value")]]?(u.removeEventListener("click",C),p.removeEventListener("click",C),g++,g===d*t/2&&clearInterval(v),u.classList.add("card-done"),p.classList.add("card-done"),u=void 0,p=void 0):setTimeout(function(){u.classList.add("card-hidden"),p.classList.add("card-hidden"),u=void 0,p=void 0},500)),c=m.getAttribute("value"),A())}function T(){n.innerHTML="",i.classList.remove("card-selected"),i=void 0,z(n,e)}function B(m){if(k().querySelector(".window-main")===n){switch(m.key){case"ArrowLeft":c%t===0?c=parseInt(c)+t-1:c-=1;break;case"ArrowRight":(parseInt(c)+1)%t===0?c-=t-1:c=parseInt(c)+1;break;case"ArrowUp":c<t?c=parseInt(c)+d*t-t:c-=t;break;case"ArrowDown":c=(parseInt(c)+t)%(d*t);break;case"Enter":C(i);break}A()}}function A(){i.classList.remove("card-selected"),i=n.querySelectorAll(".card").item(c),i.classList.add("card-selected")}}function P(){const n=document.createElement("div");return n.classList.add("card"),n.classList.add("card-hidden"),n}function I(n){for(let e=n.length-1;e>0;e--){const d=Math.floor(Math.random()*(e+1));[n[e],n[d]]=[n[d],n[e]]}}const M=window.localStorage;let y=M.getItem("username");function $(n){if(y){S(n);return}n.classList.add("selectable");const e=n.querySelector(".window-main");document.addEventListener("keydown",a);const d=document.createElement("div");d.classList.add("chat-setup-div");const t=document.createElement("input");t.classList.add("chat-username-input"),t.setAttribute("placeholder","Username"),t.setAttribute("maxlength",20),d.appendChild(t),e.appendChild(d);function a(s){k().querySelector(".window-main")===e&&s.key==="Enter"&&(s.preventDefault(),t.value.trim()!==""&&(y=t.value,M.setItem("username",y),e.removeChild(d),S(n)))}}function S(n){let e="unknown";const d=n.querySelector(".window-main");document.addEventListener("keydown",L);const t=document.createElement("div");t.classList.add("chat-channel-div"),d.appendChild(t);const a=document.createElement("input");a.classList.add("chat-channel-input"),a.setAttribute("placeholder","channel"),a.setAttribute("maxlength",20),t.appendChild(a);const s=document.createElement("button");s.classList.add("chat-channel-button"),s.textContent="Apply",s.addEventListener("click",c),t.appendChild(s);const o=document.createElement("button");o.addEventListener("click",i),t.appendChild(o);const r=document.createElement("i");r.classList.add("fa-regular"),r.classList.add("fa-trash-can"),o.appendChild(r);const l=document.createElement("div");l.classList.add("messages-list-div"),d.appendChild(l);const h=document.createElement("ul");h.classList.add("messages-list"),l.appendChild(h);const u=document.createElement("textarea");u.classList.add("message-text-area"),d.appendChild(u);const p=new WebSocket("wss://courselab.lnu.se/message-app/socket");p.onopen=()=>{f("Server","Welcome to the Chat App!")},p.onmessage=g=>{const v=JSON.parse(g.data);v.type==="message"&&v.channel===e&&f(v.username,v.data),h.scrollTop=h.scrollHeight},p.onclose=()=>{f("Server","The websocket is now closed.")};function L(g){if(k().querySelector(".window-main")===d&&g.key==="Enter"){if(g.preventDefault(),u.value.trim()!==""){const v={type:"message",data:u.value,username:y,channel:e,key:"eDBE76deU7L0H9mEBgxUKVR0VCnq0XBd"};p.send(JSON.stringify(v))}u.value=""}}function f(g,v){const C=document.createElement("li");C.classList.add("chat-message"),C.textContent=`${g}: ${v}`,h.appendChild(C)}function c(){i(),a.value.trim()===""?e="unknown":e=a.value.toLowerCase(),f("Server",`Welcome to channel "${e}"!`)}function i(){h.innerHTML=""}}async function H(n){const e=n.querySelector(".window-main"),d=document.createElement("div");d.classList.add("quiz-setup"),e.appendChild(d);const t=document.createElement("button");t.classList.add("quiz-start-button"),t.textContent="Start Quiz",t.addEventListener("click",a),d.appendChild(t);async function a(){let s=0;const o=setInterval(()=>{s++},1e3);e.innerHTML="";let r="https://courselab.lnu.se/quiz/question/1";const l=document.createElement("div");l.classList.add("quiz-question"),h();async function h(){l.innerHTML="";const L=await(await fetch(r)).json(),f=document.createElement("p");if(f.classList.add("quiz-question-text"),f.textContent=L.question,l.appendChild(f),e.appendChild(l),r=L.nextURL,L.alternatives==null){const c=document.createElement("input");c.classList.add("quiz-answer-input"),l.appendChild(c),c.focus();const i=document.createElement("button");i.classList.add("quiz-answer-submit-button"),i.textContent="Submit",i.addEventListener("click",()=>{u(c.value)}),l.appendChild(i)}else{const c=document.createElement("div");c.classList.add("quiz-alternatives-list"),l.appendChild(c);for(let i=0;i<4;i++){const g=document.createElement("button");g.classList.add("quiz-alternative-button"),g.value=`alt${i+1}`,g.textContent=L.alternatives["alt"+(i+1)],g.addEventListener("click",()=>{u(g.value)}),c.appendChild(g)}}}async function u(p){const L=await fetch(r,{method:"POST",body:JSON.stringify({answer:p}),headers:{"Content-Type":"application/json"}}),f=await L.json();if(L.status===400){l.innerHTML="";const c=document.createElement("p");c.classList.add("quiz-message"),c.textContent=f.message;const i=document.createElement("button");i.classList.add("quiz-start-button"),i.textContent="Restart",i.addEventListener("click",a),l.appendChild(c),l.appendChild(i)}else if(f.nextURL!=null)r=f.nextURL,h();else{clearInterval(o),l.innerHTML="";const c=document.createElement("P");c.classList.add("quiz-message"),c.textContent=`You won in ${s}s!`;const i=document.createElement("button");i.classList.add("quiz-start-button"),i.textContent="Restart",i.addEventListener("click",a),l.appendChild(c),l.appendChild(i)}}}}const U=document.getElementById("memory-game-launcher");U.addEventListener("click",J);const N=document.getElementById("chat-app-launcher");N.addEventListener("click",K);const Q=document.getElementById("quiz-app-launcher");Q.addEventListener("click",W);function J(){const n=x("Memory Game");O(n),document.querySelector("body").appendChild(n)}function K(){const n=x("Chat App");$(n),document.querySelector("body").appendChild(n)}function W(){const n=x("Quiz App");H(n),document.querySelector("body").appendChild(n)}
